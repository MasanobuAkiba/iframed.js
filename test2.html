<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>3rd party's JavaScript asynchronous loading - Replace pattern</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width">

	<link rel="stylesheet" href="css/normalize.min.css">
	<link rel="stylesheet" href="css/main.css">
	<link rel="stylesheet" href="google-code-prettify/sunburst.css">
</head>
<body>
<!--[if lt IE 7]>
	<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
<![endif]-->

<div class="header-container">
	<header class="wrapper clearfix">
		<h1 class="title"><a href="https://github.com/tokkonopapa/iframed.js">3rd party's JavaScript asynchronous loading</a></h1>
		<nav>
			<ul>
				<li><a href="index.html">Basic model</a></li>
				<li><a href="test1.html">Standard pattern</a></li>
				<li><a href="test2.html">Replace pattern</a></li>
				<li><a href="test3.html">Iframed pattern</a></li>
			</ul>
		</nav>
	</header>
</div>

<div class="main-container">
	<div class="main wrapper clearfix">

		<article>
			<header>
				<h1>Replace pattern (script at bottom)</h1>
				<p>Inline script just before the <code>&lt;/body&gt;</code> does not block most of the rendering of the page. This demo loads the script (it has some <code>document.write()</code> inside of it) at the bottom, then replaces it with a block in the middle of context.</p>
			</header>
			<section>
				<h2>Sample</h2>
				<!-- JavaScript Widget -->
				<div id="gist"></div>
			</section>
			<section>
				<h2>Codes</h2>
				<code><pre class="prettyprint">
&lt;div id="gist"&gt;&lt;/div&gt;
...
&lt;div id="gist-hide" style="display:none; visibility:hidden"&gt;
    &lt;script src="https://gist.github.com/..."&gt;&lt;/script&gt;
&lt;/div&gt;
&lt;script&gt;
    var id = 'gist',
        src = document.getElementById(id + '-hide'),
        dst = document.getElementById(id);
    dst.parentNode.replaceChild(src, dst);
    src.style.cssText = 'display: block; visibility: visible';
&lt;/script&gt;
&lt;/body&gt;</pre></code>
			</section>
			<footer>
			</footer>
		</article>

		<aside>
			<h3>aside</h3>
			<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam sodales urna non odio egestas tempor. Nunc vel vehicula ante. Etiam bibendum iaculis libero, eget molestie nisl pharetra in. In semper consequat est, eu porta velit mollis nec. Curabitur posuere enim eget turpis feugiat tempor. Etiam ullamcorper lorem dapibus velit suscipit ultrices.</p>
		</aside>

	</div> <!-- #main -->
</div> <!-- #main-container -->

<div class="footer-container">
	<footer class="wrapper">
		<h3><a href="https://github.com/tokkonopapa">tokkonopapa on GitHub</a></h3>
	</footer>
</div>

<!-- Replace pattern -->
<div id="gist-hide" style="display:none; visibility:hidden;">
	<script src="http://tokkono.cute.coocan.jp/demo/libs/sleep.php?wait=5000&type=js&url=https://gist.github.com/tokkonopapa/1577100.js?file=tag_cloud.rb"></script>
</div>

<script src="google-code-prettify/prettify.js"></script>
<script>prettyPrint();</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42366765-1', 'tokkonopapa.github.io');
  ga('send', 'pageview');
</script>

<script>
(function() {
	var id = "gist".split(" ");
	var n = id.length, i, src, dst;
	for (i = 0; i < n; i++) {
		src = document.getElementById(id[i] + '-hide');
		dst = document.getElementById(id[i]);
		dst.parentNode.replaceChild(src, dst);
		src.style.cssText = 'display: block; visibility: visible';
	}
})();
</script>

</body>
</html>
